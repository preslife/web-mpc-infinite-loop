@import url("https://cdn.josetxu.com/fonts/Alarm-Clock.ttf");
@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* Base Colors */
    --background: 220 13% 9%;
    --foreground: 220 10% 97%;
    --card: 0 0% 85%;
    --card-foreground: 220 10% 97%;
    --popover: 0 0% 85%;
    --popover-foreground: 220 10% 97%;
    --primary: 263 85% 65%;
    --primary-foreground: 220 10% 5%;
    --secondary: 0 0% 85%;
    --secondary-foreground: 220 10% 97%;
    --muted: 0 0% 85%;
    --muted-foreground: 220 10% 60%;
    --accent: 322 84% 68%;
    --accent-foreground: 220 10% 5%;
    --destructive: 0 84% 60%;
    --destructive-foreground: 220 10% 97%;
    --border: 220 13% 20%;
    --input: 0 0% 85%;
    --ring: 263 85% 65%;
    --radius: 0.75rem;

    /* Glass Effect Variables */
    --glass-hue1: 263;
    --glass-hue2: 322;
    --glass-border: 1px;
    --glass-radius: 16px;
    --glass-blur: 12px;

    /* Drum machine specific colors with glass effect */
    --pad-active: var(--glass-hue1) 85% 65%;
    --pad-inactive: 0 0% 85%;
    --step-active: var(--glass-hue1) 85% 65%;
    --step-playing: var(--glass-hue2) 84% 68%;
    --led-green: 120 84% 65%;
    --led-red: 0 84% 65%;
    --led-orange: 35 84% 65%;

    /* Glass gradients and effects */
    --gradient-glass: linear-gradient(135deg, 
      hsla(var(--glass-hue1), 85%, 65%, 0.1) 0%,
      hsla(var(--glass-hue2), 84%, 68%, 0.05) 50%,
      hsla(var(--glass-hue1), 85%, 65%, 0.1) 100%);
    
    /* Text glow effects */
    --text-glow-cyan: 0 0 20px hsl(186 85% 65% / 0.5);
    --text-glow-pink: 0 0 20px hsl(322 84% 68% / 0.5);
    
    --gradient-glass-border: linear-gradient(135deg,
      hsla(var(--glass-hue1), 85%, 65%, 0.3) 0%,
      hsla(var(--glass-hue2), 84%, 68%, 0.2) 50%,
      hsla(var(--glass-hue1), 85%, 65%, 0.3) 100%);

    --gradient-pad: var(--gradient-glass);
    --gradient-panel: var(--gradient-glass);
    --gradient-active: linear-gradient(135deg, 
      hsl(var(--glass-hue1), 85%, 65%) 0%,
      hsl(var(--glass-hue2), 84%, 68%) 100%);

    /* Glass shadows and glows */
    --shadow-glass: 0 8px 32px hsla(var(--glass-hue1), 85%, 65%, 0.1);
    --shadow-glass-inset: inset 0 1px 1px hsla(0, 0%, 100%, 0.1);
    --shadow-glow: 0 0 20px hsla(var(--glass-hue1), 85%, 65%, 0.3);
    --shadow-glow-strong: 0 0 40px hsla(var(--glass-hue1), 85%, 65%, 0.5);
    
    --shadow-pad: var(--shadow-glass), var(--shadow-glass-inset);
    --shadow-panel: var(--shadow-glass), var(--shadow-glass-inset);

    /* Animation easing */
    --ease-glass: cubic-bezier(0.5, 1, 0.89, 1);

    /* Sidebar colors */
    --sidebar-background: 0 0% 98%;
    --sidebar-foreground: 240 5.3% 26.1%;
    --sidebar-primary: 240 5.9% 10%;
    --sidebar-primary-foreground: 0 0% 98%;
    --sidebar-accent: 240 4.8% 95.9%;
    --sidebar-accent-foreground: 240 5.9% 10%;
    --sidebar-border: 220 13% 91%;
    --sidebar-ring: 217.2 91.2% 59.8%;

    /* Enhanced glassmorphism effects */
    --glass-background: 0 0% 0%;
    --glass-background-alpha: 0.4;
    --glass-border: 255 255 255;
    --glass-border-alpha: 0.2;
    --glass-shadow: 0 0 0;
    --glass-shadow-alpha: 0.3;
  }

  .dark {
    --background: 220 13% 5%;
    --foreground: 220 10% 97%;
    --card: 220 13% 7%;
    --card-foreground: 220 10% 97%;
    --popover: 220 13% 7%;
    --popover-foreground: 220 10% 97%;
    --primary: 263 85% 70%;
    --primary-foreground: 220 10% 5%;
    --secondary: 220 13% 10%;
    --secondary-foreground: 220 10% 97%;
    --muted: 220 13% 10%;
    --muted-foreground: 220 10% 50%;
    --accent: 322 84% 72%;
    --accent-foreground: 220 10% 5%;
    --border: 220 13% 15%;
    --input: 220 13% 10%;

    /* Enhanced glass effects for dark mode */
    --gradient-glass: linear-gradient(135deg, 
      hsla(var(--glass-hue1), 85%, 70%, 0.15) 0%,
      hsla(var(--glass-hue2), 84%, 72%, 0.08) 50%,
      hsla(var(--glass-hue1), 85%, 70%, 0.15) 100%);
    
    --shadow-glow: 0 0 25px hsla(var(--glass-hue1), 85%, 70%, 0.4);
    --shadow-glow-strong: 0 0 50px hsla(var(--glass-hue1), 85%, 70%, 0.6);

    /* Sidebar colors for dark mode */
    --sidebar-background: 240 5.9% 10%;
    --sidebar-foreground: 240 4.8% 95.9%;
    --sidebar-primary: 224.3 76.3% 48%;
    --sidebar-primary-foreground: 0 0% 100%;
    --sidebar-accent: 240 3.7% 15.9%;
    --sidebar-accent-foreground: 240 4.8% 95.9%;
    --sidebar-border: 240 3.7% 15.9%;
    --sidebar-ring: 217.2 91.2% 59.8%;

    /* Enhanced glassmorphism effects for dark mode */
    --glass-background: 0 0% 0%;
    --glass-background-alpha: 0.4;
    --glass-border: 255 255 255;
    --glass-border-alpha: 0.2;
    --glass-shadow: 0 0 0;
    --glass-shadow-alpha: 0.3;
  }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
    background: radial-gradient(ellipse at bottom, 
      hsla(var(--glass-hue1), 85%, 15%, 0.3) 0%, 
      hsla(var(--background)) 40%);
    min-height: 100vh;
  }

  /* Glass morphism base classes */
  .glass-panel {
    background: var(--gradient-glass);
    backdrop-filter: blur(var(--glass-blur));
    -webkit-backdrop-filter: blur(var(--glass-blur));
    border: var(--glass-border) solid transparent;
    background-clip: padding-box;
    border-radius: var(--glass-radius);
    position: relative;
  }

  .glass-panel::before {
    content: '';
    position: absolute;
    inset: 0;
    padding: var(--glass-border);
    background: var(--gradient-glass-border);
    border-radius: inherit;
    mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
    mask-composite: xor;
    -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
    -webkit-mask-composite: xor;
    pointer-events: none;
  }

  .glass-glow {
    box-shadow: var(--shadow-glow);
  }

  .glass-glow-strong {
    box-shadow: var(--shadow-glow-strong);
  }

  /* Neon border animations */
  .neon-border {
    position: relative;
    overflow: hidden;
  }

  .neon-border::after {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: inherit;
    padding: 1px;
    background: linear-gradient(45deg, 
      transparent 0%, 
      hsla(var(--glass-hue1), 85%, 65%, 0.8) 20%, 
      hsla(var(--glass-hue2), 84%, 68%, 0.8) 40%,
      transparent 60%,
      hsla(var(--glass-hue1), 85%, 65%, 0.8) 80%,
      transparent 100%);
    mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
    mask-composite: xor;
    -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
    -webkit-mask-composite: xor;
    opacity: 0;
    transition: opacity 0.3s var(--ease-glass);
  }

  .neon-border:hover::after {
    opacity: 1;
  }

  /* Text glow utilities */
  .text-shadow-glow {
    text-shadow: var(--text-glow-cyan);
  }
  
  .text-shadow-glow-pink {
    text-shadow: var(--text-glow-pink);
  }
}

@layer utilities {
  /* Enhanced Glass Effects with Browser Prefixes */
  .glass {
    background: hsla(var(--glass-background) / var(--glass-background-alpha));
    /* Add webkit prefix for Safari support */
    -webkit-backdrop-filter: blur(20px);
    backdrop-filter: blur(20px);
    border: 1px solid hsla(var(--glass-border) / var(--glass-border-alpha));
    box-shadow: 0 8px 32px hsla(var(--glass-shadow) / var(--glass-shadow-alpha));
  }
  
  .glass-strong {
    background: hsla(var(--glass-background) / calc(var(--glass-background-alpha) * 1.2));
    /* Add webkit prefix for Safari support */
    -webkit-backdrop-filter: blur(24px);
    backdrop-filter: blur(24px);
    border: 1px solid hsla(var(--glass-border) / calc(var(--glass-border-alpha) * 1.2));
    box-shadow: 0 12px 40px hsla(var(--glass-shadow) / calc(var(--glass-shadow-alpha) * 1.2));
  }

  /* Simplified Neon Glass Panel Effect for Better Browser Compatibility */
  .neon-panel {
    --hue1: 222;
    --hue2: 255;
    --border: 1px;
    --border-color: hsl(var(--hue2), 12%, 20%);
    --radius: 22px;
    --ease: cubic-bezier(0.5, 1, 0.89, 1);
    
    position: relative;
    border-radius: var(--radius);
    border: var(--border) solid var(--border-color);
    
    /* Simplified background with fallback */
    background: hsl(220, 25%, 5%);
    background: linear-gradient(135deg, 
      hsla(var(--hue1), 50%, 8%, 0.9) 0%,
      hsla(var(--hue2), 50%, 6%, 0.8) 50%,
      hsla(220, 25%, 4%, 0.7) 100%);
    
    /* Add webkit prefix for Safari */
    -webkit-backdrop-filter: blur(12px);
    backdrop-filter: blur(12px);
    
    box-shadow: 
      hsla(var(--hue2), 50%, 2%, 0.8) 0px 10px 16px -8px, 
      hsla(var(--hue2), 50%, 4%, 0.6) 0px 20px 36px -14px;
    
    transition: all 0.3s ease;
    overflow: hidden;
    color: #737985;
  }

  /* Fallback for browsers that don't support backdrop-filter */
  @supports not (backdrop-filter: blur(12px)) {
    .neon-panel {
      background: hsl(220, 25%, 3%);
      background: linear-gradient(135deg, 
        hsla(var(--hue1), 50%, 6%, 0.95) 0%,
        hsla(var(--hue2), 50%, 4%, 0.9) 50%,
        hsla(220, 25%, 2%, 0.85) 100%);
    }
  }

  .neon-panel .shine,
  .neon-panel .glow {
    pointer-events: none;
    position: absolute;
    z-index: 1;
  }

  /* Simplified shine effect for better compatibility */
  .neon-panel .shine {
    --hue: var(--hue1);
    border-top-right-radius: inherit;
    border-bottom-left-radius: inherit;
    border: 1px solid transparent;
    width: 75%;
    aspect-ratio: 1;
    right: calc(var(--border) * -1);
    top: calc(var(--border) * -1);
    
    /* Simplified gradient using standard syntax */
    background: radial-gradient(ellipse at top right, 
      hsla(var(--hue), 80%, 60%, 0.3) 0%,
      hsla(var(--hue), 70%, 50%, 0.1) 30%,
      transparent 70%);
    
    /* Fallback mask using standard properties */
    -webkit-mask: linear-gradient(transparent), linear-gradient(black);
    mask: linear-gradient(transparent), linear-gradient(black);
    -webkit-mask-repeat: no-repeat;
    mask-repeat: no-repeat;
    -webkit-mask-clip: padding-box, border-box;
    mask-clip: padding-box, border-box;
    -webkit-mask-composite: subtract;
    mask-composite: subtract;
  }

  .neon-panel .shine::before,
  .neon-panel .shine::after {
    content: "";
    position: absolute;
    inset: -2px;
    -webkit-mask: none;
    mask: none;
  }

  .neon-panel .shine::after { 
    z-index: 2;
    background: radial-gradient(ellipse at top right, 
      hsla(var(--hue), 80%, 85%, 0.2) 0%,
      hsla(var(--hue), 70%, 70%, 0.05) 25%,
      transparent 50%);
  }

  .neon-panel .shine-bottom {
    --hue: var(--hue2);
    top: auto;
    bottom: calc(var(--border) * -1);
    left: calc(var(--border) * -1);
    right: auto;
    background: radial-gradient(ellipse at bottom left, 
      hsla(var(--hue), 80%, 60%, 0.3) 0%,
      hsla(var(--hue), 70%, 50%, 0.1) 30%,
      transparent 70%);
  }

  /* Simplified glow effect */
  .neon-panel .glow {
    --hue: var(--hue1);
    border-top-right-radius: calc(var(--radius) * 2.5);
    border-bottom-left-radius: calc(var(--radius) * 2.5);
    border: calc(var(--radius) * 1.25) solid transparent;
    inset: calc(var(--radius) * -2);
    width: 75%;
    aspect-ratio: 1;
    left: auto;
    bottom: auto;
    opacity: 1;
    filter: blur(12px) saturate(1.25) brightness(0.5);
    mix-blend-mode: plus-lighter;
    z-index: 3;
  }

  .neon-panel .glow::before, 
  .neon-panel .glow::after {
    content: "";
    position: absolute;
    inset: 0;
    border: inherit;
    border-radius: inherit;
    
    /* Simplified radial gradient for better compatibility */
    background: radial-gradient(ellipse at center, 
      hsla(var(--hue), 95%, 60%, 0.6) 0%,
      hsla(var(--hue), 85%, 50%, 0.3) 40%,
      transparent 70%);
    
    -webkit-mask: linear-gradient(transparent), linear-gradient(black);
    mask: linear-gradient(transparent), linear-gradient(black);
    -webkit-mask-repeat: no-repeat;
    mask-repeat: no-repeat;
    -webkit-mask-clip: padding-box, border-box;
    mask-clip: padding-box, border-box;
    -webkit-mask-composite: subtract;
    mask-composite: subtract;
    filter: saturate(2) brightness(1);
  }

  .neon-panel .glow::after {
    border-width: calc(var(--radius) * 1.75);
    border-radius: calc(var(--radius) * 2.75);
    inset: calc(var(--radius) * -0.25);
    z-index: 4;
    opacity: 0.75;
    background: radial-gradient(ellipse at center, 
      hsla(var(--hue), 100%, 70%, 0.4) 0%,
      hsla(var(--hue), 90%, 60%, 0.2) 35%,
      transparent 65%);
  }

  .neon-panel .glow-bottom {
    --hue: var(--hue2);
    inset: calc(var(--radius) * -2);
    top: auto;
    right: auto;
  }

  .neon-panel .glow-bright {
    border-width: 5px;
    border-radius: calc(var(--radius) + 2px);
    inset: -7px;
    left: auto;
    filter: blur(2px) brightness(0.66);
    background: radial-gradient(ellipse at center, 
      hsla(var(--hue), 100%, 80%, 0.5) 0%,
      hsla(var(--hue), 90%, 70%, 0.2) 30%,
      transparent 60%);
  }

  .neon-panel .glow-bright::after {
    content: none;
  }

  .neon-panel .glow-bright.glow-bottom {
    inset: -7px;
    right: auto;
    top: auto;
  }

  .neon-panel .inner {
    position: relative;
    z-index: 10;
  }

  @keyframes neon-glow {
    0% { opacity: 0; }
    3% { opacity: 1; }
    10% { opacity: 0; }
    12% { opacity: 0.7; }
    16% { opacity: 0.3; animation-timing-function: var(--ease); }
    100% { opacity: 1; animation-timing-function: var(--ease); }
  }

  .neon-panel.animate-glow {
    animation: neon-glow 1.5s var(--ease) both;
  }
}

/* Volume Knob Styles */
.volume-knob-slider {
  width: 10em;
  height: 10em;
  position: relative;
  cursor: pointer;
  --shd: drop-shadow(-1px -2px 1px #111) drop-shadow(0px 1px 1px #404040);
  --tra: all 0.4s ease 0s;
}

.volume-knob-slider::before {
  content: "";
  position: absolute;
  background: linear-gradient(-90deg, #525252 0%, #373737 100%);
  width: 10em;
  height: 10em;
  border-radius: 50%;
  box-shadow: -20px 0px 20px #757575, 20px 0px 35px #111111, inset -5px 0px 6px #242424, inset 5px 0px 6px #979797;
}

.volume-knob-knob {
  width: 10em;
  height: 10em;
  position: relative;
  cursor: pointer;
}

.volume-knob-knob::before {
  content: "";
  position: absolute;
  top: 14px;
  left: 50%;
  transform: translateX(-50%);
  width: 30px;
  height: 29px;
  background: radial-gradient(circle at 50% 45%, var(--mut) 5px, #fff0 6px), radial-gradient(circle at 50% 50%, #404040 5px, #fff0 7px), radial-gradient(circle at 50% 40%, #1118 5px, #fff0 6px), linear-gradient(0deg, #373737, #2e2e2e);
  box-shadow: 0px -1px 1px #111, 0px 1px 1px #555;
  border: 2px solid #2e2e2e;
  border-radius: 50%;
  box-sizing: border-box;
  cursor: pointer;
  z-index: 1;
}

.volume-knob-knob::after {
  content: "";
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  border: 5px solid #00bcd410;
  width: 130%;
  height: 130%;
  border-radius: 50%;
  transition: var(--tra);
}

.volume-knob-slider:active .volume-knob-knob::before {
  box-shadow: 0px 0px 5px 1px var(--c1), 0px 0px 30px 1px var(--c1), 0px 0px 2px 0px var(--c1) inset, 0px -1px 1px #1118, 0px 3px 3px #404040;
  border-color: var(--c1);
}

.volume-knob-slider:active .volume-knob-knob::after {
  box-shadow: 0px 0px 10px #349beb, inset 0px 0px 10px #349beb;
}

.volume-knob-slider:active * {
  --c1: #c7e6ff;
}

.volume-knob-glow {
  top: 50%;
  left: 50%;
  position: absolute;
  border-radius: 100%;
  transform: translate(-50%, -50%);
  width: 130%;
  height: 130%;
  z-index: -2;
}

.volume-knob-glow:after {
  content: "";
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: calc(100% + 10px);
  height: calc(100% + 10px);
  border-radius: 50%;
  box-shadow: 0 0 10px #349beb8a, 0 0 0 1px #0007;
  background: radial-gradient(circle at 50% 50%, #333333 6.5em, #fff0 calc(6.5em + 1px)), linear-gradient(-90deg, var(--c1) 0 calc(var(--vol) * 1%), #fff0 0% 100%);
  filter: drop-shadow(0px 0px 4px #000) drop-shadow(0px 0px 1px #349beb8a) drop-shadow(0px 0px 2px #349beb8a);
}

.volume-knob-number {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%) rotate(-90deg);
  width: 1.75em;
  height: 1.75em;
  background: #282828;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 30px;
  font-family: "Alarm Clock", Arial, Helvetica, serif;
  color: #39c1ff;
  border-radius: 99%;
  box-shadow: 0px 0px 10px 0px #000000 inset, 0px 0px 100px -80px #39c1ff inset;
  border: 2px solid #0001;
  filter: var(--shd);
  text-shadow: 0px 0px 3px #000000, 0px 0px 2px #000000, 0px 0px 3px #39c1ff;
  z-index: 10;
}

.volume-knob-number:after {
  content: "88";
  position: absolute;
  color: #0001;
  z-index: -1;
  text-shadow: 0px 0px 1px #0001;
  filter: var(--shd);
}

.volume-knob-slider:active .volume-knob-number {
  box-shadow: 0px 0px 10px 0px #000000 inset, 0px 0px 100px -40px #335564 inset, 0px 0px 30px 0px #8edbff;
  text-shadow: 0px 0px 2px #2196f3, 0px 0px 2px #2196f3, 0px 0px 2px #23759b, 0px 0px 20px #144054, 0px 0px 25px #39c1ff;
  color: #c7eaff;
}